@import 'tailwindcss';

@layer theme {
	:root {
		--font-sans:
			'Inter', ui-sans-serif, system-ui, -apple-system, Segoe UI, Roboto, Helvetica, Arial,
			'Apple Color Emoji', 'Segoe UI Emoji', 'Segoe UI Symbol';
		--ink: 20 20 20;
		--paper: 255 255 255; /* pure white */
		/* store full url() form for current background */
		--bg-image: url('/images/flower.webp');
		/* subtle grain texture (SVG fractal noise) */
		--grain: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 100 100'%3E%3Cfilter id='n'%3E%3CfeTurbulence type='fractalNoise' baseFrequency='0.9' numOctaves='2' stitchTiles='stitch'/%3E%3CfeColorMatrix type='saturate' values='0'/%3E%3CfeComponentTransfer%3E%3CfeFuncA type='table' tableValues='0 0 0 0 0.035'/%3E%3C/feComponentTransfer%3E%3C/filter%3E%3Crect width='100%25' height='100%25' filter='url(%23n)'/%3E%3C/svg%3E");
	}
}

@layer utilities {
	.manga-panel {
		background: white;
		border: 1px solid black;
		border-radius: 0;
		box-shadow: 6px 6px 0 0 rgb(0 0 0);
	}

	/* dotted background utility for manga title bars */
	.dot-bg {
		background-image: radial-gradient(rgba(0, 0, 0, 0.18) 1px, transparent 1px);
		background-size: 6px 6px;
		background-position: top left;
		opacity: 0.5;
	}
}

/* Page canvas baseline */
html,
body {
	height: 100%;
}

body {
	/* base canvas styling */
	background-color: rgb(var(--paper));
	color: rgb(var(--ink));
	/* layers: [0] grain texture, [1] primary (flower/me) over white base */
	background-image: var(--grain), var(--bg-image);
	/* primary: width-based, bottom anchored, no repeat; grain tiling auto */
	background-size:
		auto,
		100% auto;
	background-repeat: repeat, no-repeat;
	background-position:
		top left,
		center bottom;
	font-family: var(--font-sans);
}

.bg-fader {
	position: fixed;
	inset: 0;
	pointer-events: none;
	background-size: 100% auto;
	background-repeat: no-repeat;
	background-position: center bottom;
	opacity: 0;
	transition: opacity 200ms ease;
	z-index: 0;
}

.page-layer {
	position: relative;
	z-index: 1;
}

.stack > * + * {
	margin-top: 0.6rem;
}

/* Poetic text formatting */
.poem {
	white-space: pre-wrap;
	line-height: 1.85;
	letter-spacing: 0.01em;
}

.poem em {
	font-style: italic;
}

.poem strong {
	font-weight: 600;
}

/* Manga-style helpers */
.manga-card {
	background: white;
	border: 1px solid black;
	border-radius: 2px;
	box-shadow: 4px 4px 0 0 rgb(0 0 0);
}
